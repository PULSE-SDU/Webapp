<table mat-table [dataSource]="tags()">
  <!-- Tag ID Column -->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef>Tag ID</th>
    <td mat-cell *matCellDef="let element">{{ element.tagId }}</td>
  </ng-container>

  <!-- Battery Level Column -->
  <ng-container matColumnDef="batteryLevel">
    <th mat-header-cell *matHeaderCellDef>Battery Level</th>
    <td mat-cell *matCellDef="let element">
      <app-battery-bar [tag]="element" [barWidthPercentage]="30"></app-battery-bar></td
  ></ng-container>

  <!-- Status Column -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let element">
      <app-status-chip [batteryStatus]="element.status"></app-status-chip>
    </td>
  </ng-container>

  <!-- Prediction Column -->
  <ng-container matColumnDef="prediction">
    <th mat-header-cell *matHeaderCellDef>Prediction</th>
    <td mat-cell *matCellDef="let element">
      @if (element.status === BatteryStatus.CRITICAL) {
        <span class="font-semibold" [style.color]="getStatusColor(element.status)">{{
          element.prediction
        }}</span>
      } @else if (element.status === BatteryStatus.WARNING) {
        <span [style.color]="getStatusColor(element.status)">{{ element.prediction }}</span>
      } @else {
        {{ element.prediction }}
      }
    </td>
  </ng-container>

  <!-- Voltage Column -->
  <ng-container matColumnDef="voltage">
    <th mat-header-cell *matHeaderCellDef>Voltage</th>
    <td mat-cell *matCellDef="let element">{{ element.voltage }} V</td>
  </ng-container>

  <!-- Actions Column -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let element">
      <button mat-button (click)="openTagDetails.emit(element)">Details</button>
    </td>
  </ng-container>

  <tr
    mat-header-row
    *matHeaderRowDef="['id', 'batteryLevel', 'status', 'prediction', 'voltage', 'actions']"
  ></tr>
  <tr
    mat-row
    *matRowDef="
      let row;
      columns: ['id', 'batteryLevel', 'status', 'prediction', 'voltage', 'actions']
    "
  ></tr>
</table>
