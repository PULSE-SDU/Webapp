<div class="dialog-container">
  <!-- Header Section -->
  <div class="dialog-header">
    <div class="header-content">
      <h2 class="dialog-title">Equipment Details</h2>
      <p class="dialog-subtitle">Detailed information and properties</p>
    </div>
    <button mat-icon-button class="close-button" (click)="close()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- General Information Section -->
  <div class="dialog-section">
    <div class="info-grid">
      <div class="info-item">
        <div class="info-label">Tag ID</div>
        <div class="info-value">{{ tag.node_address }}</div>
      </div>
    </div>
  </div>

  <!-- Battery Status Section -->
  <div class="dialog-section">
    <div class="section-label">Battery Status</div>
    <div class="battery-status-container">
      <div class="battery-icon-wrapper">
        @if (tag.batteryStatus?.status_title === batteryStatus.GOOD) {
          <mat-icon [style.color]="getBatteryColor(tag.batteryStatus?.status_title)">battery_full</mat-icon>
        } @else if (tag.batteryStatus?.status_title === batteryStatus.LOW) {
          <mat-icon [style.color]="getBatteryColor(tag.batteryStatus?.status_title)">battery_alert</mat-icon>
        } @else {
          <mat-icon [style.color]="getBatteryColor(tag.batteryStatus?.status_title)">battery_std</mat-icon>
        }
        <span class="battery-percentage-large" [style.color]="getBatteryColor(tag.batteryStatus?.status_title)">
          {{ tag.batteryStatus?.battery_percentage }}%
        </span>
      </div>
      <div class="battery-bar-container">
        <div class="battery-bar-wrapper">
          <div
            class="battery-bar-fill"
            [style.width.%]="tag.batteryStatus?.battery_percentage"
            [style.background-color]="getBatteryColor(tag.batteryStatus?.status_title)"
          ></div>
        </div>
        <span class="status-badge" [ngClass]="getStatusClass(tag.batteryStatus?.status_title)">
          {{ tag.batteryStatus?.status_title }}
        </span>
      </div>
    </div>
  </div>

  <!-- Battery Life Prediction Section -->
  <div class="dialog-section">
    <div class="section-label">Battery Life Prediction</div>
    <div class="prediction-container">
      <div class="prediction-icon-wrapper">
        <mat-icon class="prediction-icon">event</mat-icon>
      </div>
      <div class="prediction-content">
        <div class="prediction-text" [style.color]="getBatteryColor(tag.batteryStatus?.status_title)">
          <p>{{ (tag.batteryStatus?.prediction_days ?? 0) }}d {{ (tag.batteryStatus?.prediction_hours ?? 0) }}h</p>
        </div>
        <div class="prediction-context">Based on current usage patterns and battery health</div>
      </div>
    </div>
  </div>

  <!-- Technical Properties Section -->
  @if (tag.voltage) {
    <div class="dialog-section">
      <div class="section-label">Technical Properties</div>
      <div class="technical-properties">
        <div class="property-card">
          <mat-icon class="property-icon">bolt</mat-icon>
          <div class="property-label">Voltage</div>
          <div class="property-value">{{ tag.voltage }}</div>
        </div>
      </div>
    </div>
  }
</div>
