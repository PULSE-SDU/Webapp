<mat-card class="equipment-attention-card">
  <mat-card-header class="card-header">
    <mat-card-title class="card-title">Equipment Needing Attention</mat-card-title>
    <mat-card-subtitle class="card-subtitle">Sorted by predicted battery life</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content class="card-content">
    <div class="equipment-list">
      @for (item of equipment(); track item.node_address) {
        <div class="equipment-item">
          <div class="equipment-left">
            <div class="equipment-name-row">
              <span class="equipment-name">{{ item.node_address }}</span>
              <app-status-chip [batteryStatus]="item.battery_status?.title"></app-status-chip>
            </div>
          </div>
          <div class="equipment-right">
            <div class="battery-percentage">{{ item.battery_status?.percentage }}%</div>
            @if (item.battery_status?.prediction_days || item.battery_status?.prediction_days) {
              <div class="days-left"><p>{{ (item.battery_status?.prediction_days ?? 0) }}d {{ (item.battery_status?.prediction_hours ?? 0) }}h</p></div>
            }
          </div>
        </div>
      }
    </div>
  </mat-card-content>
</mat-card>
