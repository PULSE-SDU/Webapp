<div class="tag-list-container">
  <div class="tag-list-header">
    <h1 class="page-title">Tag List</h1>
    <p class="page-subtitle">View and manage all equipment tags</p>
  </div>

  <div class="table-container">
    <table mat-table [dataSource]="tags" class="tag-table">
      <!-- Tag ID Column -->
      <ng-container matColumnDef="tagId">
        <th mat-header-cell *matHeaderCellDef>Tag ID</th>
        <td mat-cell *matCellDef="let tag">{{ tag.tagId }}</td>
      </ng-container>

      <!-- Equipment Name Column -->
      <ng-container matColumnDef="equipmentName">
        <th mat-header-cell *matHeaderCellDef>Equipment Name</th>
        <td mat-cell *matCellDef="let tag">{{ tag.equipmentName }}</td>
      </ng-container>

      <!-- Type Column -->
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>Type</th>
        <td mat-cell *matCellDef="let tag">{{ tag.type }}</td>
      </ng-container>

      <!-- Location Column -->
      <ng-container matColumnDef="location">
        <th mat-header-cell *matHeaderCellDef>Location</th>
        <td mat-cell *matCellDef="let tag">{{ tag.location }}</td>
      </ng-container>

      <!-- Battery Level Column -->
      <ng-container matColumnDef="batteryLevel">
        <th mat-header-cell *matHeaderCellDef>Battery Level</th>
        <td mat-cell *matCellDef="let tag" class="battery-cell">
          <div class="battery-container">
            <div class="battery-bar-wrapper">
              <div
                class="battery-bar-fill"
                [style.width.%]="tag.batteryLevel"
                [style.background-color]="getBatteryColor(tag.batteryLevel, tag.status)"
              ></div>
            </div>
            <span
              class="battery-percentage"
              [style.color]="getBatteryColor(tag.batteryLevel, tag.status)"
            >
              {{ tag.batteryLevel }}%
            </span>
          </div>
        </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let tag">
          <span class="status-badge" [ngClass]="getStatusClass(tag.status)">
            {{ tag.status }}
          </span>
        </td>
      </ng-container>

      <!-- Prediction Column -->
      <ng-container matColumnDef="prediction">
        <th mat-header-cell *matHeaderCellDef>Prediction</th>
        <td mat-cell *matCellDef="let tag">
          <span class="prediction-text" [ngClass]="getPredictionClass(tag.prediction, tag.status)">
            {{ tag.prediction }}
          </span>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let tag">
          <button mat-button class="details-button" (click)="openDetailsDialog(tag)">
            Details
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>
